!function(){window.JSON&&JSON.stringify||(window.JSON=new V);var c={data:"https://trace.hsmob.com/marketing/scloud/trace/dot/dot.gif"},r="hsmob.com",s={nameBridge:"https://trace.hsmob.com/bridge/w.htm",messageBridge:"https://trace.hsmob.com/bridge/m.htm"},i="metis",t="hmsr",e=i+"_uid",o=i+"_local",a="__"+i,u="1.0.1",d=i+"_store",l={monitorId:"mid",sessionId:"sid",userId:"uid",channelId:"cid",pixelType:"pt",visitCount:"vc",pageCode:"pc",eventType:"et",eventValue:"ev",hash:"h",version:"v",platformKey:"k",clientInfo:"ci",visitTimeInterval:"vt",currentLocation:"l"},f={},m,p={_setMonitor:function(t){window[a].id=t},_setPopStateMode:function(t){this.info.popStateMode=null==t||t},_trackPageView:function(e,o){"function"==typeof e&&(o=e,e=null);var i,r=this.localInfo,a=c.data,s=this;f[s.id]=0,T(function(t){var n=(m=t).localInfo[s.id];n&&n.timeStamp&&(r.timeStamp&&n.timeStamp>r.timeStamp||!r.timeStamp)&&(s.localInfo=r=n),b.call(s,e),i=J.apply(s),r.timeStamp=(new Date).getTime(),j.apply(s),m.localInfo[s.id]=r,C(m),v(w(a,y(i)),o),f[s.id]=1})},_setPageCode:function(t){this.info.pageCode=t||""},_trackEvent:function(t,n,e){if("string"==typeof t||"number"==typeof t)if("function"==typeof n&&(e=n,n=""),f[this.id]){var o,i=c.data;(o=J.apply(this)).push([l.eventType,t]),o.push([l.eventValue,n]),v(w(i,y(o)),e)}else{var r=arguments.callee,a=this;setTimeout(function(){r.call(a,t,n,e)},0)}}},n;function h(){for(var t in window[a].monitor){var n=window[a].monitor[t];n.info.popStateMode&&n.push(["_trackPageView"])}}function g(){var t=document.location.href;setInterval(function(){t!==document.location.href&&(t=document.location.href,h())},13)}function v(t,n){var e,o=new Image,i="wmsdk_log_"+Math.floor(2147483648*Math.random()).toString(36);(window[i]=o).onload=o.onerror=o.onabort=function(){clearTimeout(e),o.onload=o.onerror=o.onabort=null,o=window[i]=null,n&&n(t)},e=setTimeout(function(){o.onload()},3e3),o.src=t}function w(t,n){return-1<t.indexOf("?")?t+"&"+n:t+"?"+n}function y(t){var n=[];(t=t.concat()).push([l.version,u]),document.location.hash&&t.push([l.hash,document.location.hash]),t.push([l.currentLocation,document.location.href]),t.push(["_",(Math.random()+"").substr(2)]);for(var e=0;e<t.length;e++){var o=t[e],i=o[1];null!=i&&""!==i&&("object"==typeof i&&(i=JSON.stringify(i)),n.push(o[0]+"="+encodeURIComponent(i)))}return n.join("&")}function I(t){var n=new RegExp("[?&]"+t+"=([^&#]*)"),e=document.location.href.match(n);return null==e?"":decodeURIComponent(e[1])}function S(){return I(t)}function b(t){var n=this.localInfo,e=0,o=(new Date).getTime();!n.timeStamp||18e5<o-n.timeStamp||o-n.timeStamp<0?e=1:new Date(o).getDate()!==new Date(n.timeStamp).getDate()?e=1:t&&document.referrer&&!document.referrer.match(new RegExp("^https*\\://"+document.location.hostname,"i"))&&(e=1),e||!n.sessionId?(n.sessionId=P(),n.visitCount=1,n.channel=S(),n.visitTimeInterval=0):(n.visitCount++,n.visitTimeInterval=Math.ceil((o-n.visitTime)/1e3)),n.visitTime=o}function T(n){var e={};function o(t){var n={};try{n=JSON.parse(t)}catch(t){}return n}function i(t){return t.uid&&t.localInfo||(t={localInfo:{}}),t.uid=x(t.uid),t}B()===r?((e=L(d))&&(e=o(e)),n&&n(i(e))):F({command:"get",name:d},function(t){t.value&&(e=o(t.value)),n&&n(i(e))})}function C(t,n){B()===r?(R(d,JSON.stringify(t)),n&&n()):F({command:"set",name:d,value:JSON.stringify(t)},function(t){n&&n()})}function _(){return L(e)||k(e)}function x(t){var n=t||_();return n||(n=P()),N(e,n),R(e,n),n}function N(t,n){"object"==typeof n&&(n=JSON.stringify(n)),window.localStorage&&localStorage.setItem&&localStorage.setItem(t,n)}function O(t,n){"object"==typeof n&&(n=JSON.stringify(n)),window.sessionStorage&&sessionStorage.setItem&&sessionStorage.setItem(t,n)}function k(t){return window.localStorage&&localStorage.getItem?localStorage.getItem(t):""}function M(t){return window.sessionStorage&&sessionStorage.getItem?sessionStorage.getItem(t):""}function J(){var t=this.info,n=this.localInfo,e=[],o=x();return e.push([l.monitorId,this.id]),e.push([l.sessionId,n.sessionId]),e.push([l.userId,o]),e.push([l.channelId,n.channel]),e.push([l.pixelType,"h5"]),e.push([l.visitCount,n.visitCount]),e.push([l.pageCode,t.pageCode]),e.push([l.platformKey,i]),e.push([l.visitTimeInterval,n.visitTimeInterval]),e}function A(){var t=o+"_"+this.id,n=L(t)||k(t);if(n)try{this.localInfo=JSON.parse(n)}catch(t){}}function D(){var t=L(sessionName+"_"+this.id)||M(sessionName+"_"+this.id);try{this.sessionInfo=JSON.parse(t)}catch(t){}}function j(){N(o+"_"+this.id,this.localInfo),R(o+"_"+this.id,JSON.stringify(this.localInfo),10512e3)}function E(){O(sessionName+"_"+this.id,this.sessionInfo),document.cookie=sessionName+"_"+this.id+"="+encodeURIComponent(JSON.stringify(this.sessionInfo))+"; path=/;"}function B(){if(B.rootDomain)return B.rootDomain;var t=document.domain,n=t.split(".");n.reverse();for(var e=0,o="",i="";e<n.length;e++)try{return o=n[e],i=i?o+"."+i:o,document.domain=i,document.domain=t,i}catch(t){}return B.rootDomain=t}function R(t,n,e,o){e=e||15768e3;var i=new Date;if(0==e)var r=new Date(o);else r=new Date(i.getTime()+6e4*e);document.cookie=t+"="+encodeURIComponent(n)+"; domain="+B()+"; path=/;"+(void 0===e?"":"expires="+r.toGMTString()+";")}function L(t){for(var n=document.cookie.split("; "),e=0;e<n.length;e++)if(0==n[e].indexOf(t+"="))return decodeURIComponent(n[e].replace(t+"=",""));return""}function P(){return U("weapp-"+(new Date).getTime()+"-"+function(){for(var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",n=t.length,e="",o=0;o<12;o++)e+=t.charAt(Math.floor(Math.random()*n));return e}()+"-"+document.location+"-"+navigator.userAgent)}function U(t){var i=0,r=8;function n(t){return a(e(o(t),t.length*r))}function e(t,n){t[n>>5]|=128<<n%32,t[14+(n+64>>>9<<4)]=n;for(var e=1732584193,o=-271733879,i=-1732584194,r=271733878,a=0;a<t.length;a+=16){var s=e,c=o,u=i,d=r;o=p(o=p(o=p(o=p(o=m(o=m(o=m(o=m(o=f(o=f(o=f(o=f(o=l(o=l(o=l(o=l(o,i=l(i,r=l(r,e=l(e,o,i,r,t[a+0],7,-680876936),o,i,t[a+1],12,-389564586),e,o,t[a+2],17,606105819),r,e,t[a+3],22,-1044525330),i=l(i,r=l(r,e=l(e,o,i,r,t[a+4],7,-176418897),o,i,t[a+5],12,1200080426),e,o,t[a+6],17,-1473231341),r,e,t[a+7],22,-45705983),i=l(i,r=l(r,e=l(e,o,i,r,t[a+8],7,1770035416),o,i,t[a+9],12,-1958414417),e,o,t[a+10],17,-42063),r,e,t[a+11],22,-1990404162),i=l(i,r=l(r,e=l(e,o,i,r,t[a+12],7,1804603682),o,i,t[a+13],12,-40341101),e,o,t[a+14],17,-1502002290),r,e,t[a+15],22,1236535329),i=f(i,r=f(r,e=f(e,o,i,r,t[a+1],5,-165796510),o,i,t[a+6],9,-1069501632),e,o,t[a+11],14,643717713),r,e,t[a+0],20,-373897302),i=f(i,r=f(r,e=f(e,o,i,r,t[a+5],5,-701558691),o,i,t[a+10],9,38016083),e,o,t[a+15],14,-660478335),r,e,t[a+4],20,-405537848),i=f(i,r=f(r,e=f(e,o,i,r,t[a+9],5,568446438),o,i,t[a+14],9,-1019803690),e,o,t[a+3],14,-187363961),r,e,t[a+8],20,1163531501),i=f(i,r=f(r,e=f(e,o,i,r,t[a+13],5,-1444681467),o,i,t[a+2],9,-51403784),e,o,t[a+7],14,1735328473),r,e,t[a+12],20,-1926607734),i=m(i,r=m(r,e=m(e,o,i,r,t[a+5],4,-378558),o,i,t[a+8],11,-2022574463),e,o,t[a+11],16,1839030562),r,e,t[a+14],23,-35309556),i=m(i,r=m(r,e=m(e,o,i,r,t[a+1],4,-1530992060),o,i,t[a+4],11,1272893353),e,o,t[a+7],16,-155497632),r,e,t[a+10],23,-1094730640),i=m(i,r=m(r,e=m(e,o,i,r,t[a+13],4,681279174),o,i,t[a+0],11,-358537222),e,o,t[a+3],16,-722521979),r,e,t[a+6],23,76029189),i=m(i,r=m(r,e=m(e,o,i,r,t[a+9],4,-640364487),o,i,t[a+12],11,-421815835),e,o,t[a+15],16,530742520),r,e,t[a+2],23,-995338651),i=p(i,r=p(r,e=p(e,o,i,r,t[a+0],6,-198630844),o,i,t[a+7],10,1126891415),e,o,t[a+14],15,-1416354905),r,e,t[a+5],21,-57434055),i=p(i,r=p(r,e=p(e,o,i,r,t[a+12],6,1700485571),o,i,t[a+3],10,-1894986606),e,o,t[a+10],15,-1051523),r,e,t[a+1],21,-2054922799),i=p(i,r=p(r,e=p(e,o,i,r,t[a+8],6,1873313359),o,i,t[a+15],10,-30611744),e,o,t[a+6],15,-1560198380),r,e,t[a+13],21,1309151649),i=p(i,r=p(r,e=p(e,o,i,r,t[a+4],6,-145523070),o,i,t[a+11],10,-1120210379),e,o,t[a+2],15,718787259),r,e,t[a+9],21,-343485551),e=h(e,s),o=h(o,c),i=h(i,u),r=h(r,d)}return Array(e,o,i,r)}function s(t,n,e,o,i,r){return h(function(t,n){return t<<n|t>>>32-n}(h(h(n,t),h(o,r)),i),e)}function l(t,n,e,o,i,r,a){return s(n&e|~n&o,t,n,i,r,a)}function f(t,n,e,o,i,r,a){return s(n&o|e&~o,t,n,i,r,a)}function m(t,n,e,o,i,r,a){return s(n^e^o,t,n,i,r,a)}function p(t,n,e,o,i,r,a){return s(e^(n|~o),t,n,i,r,a)}function h(t,n){var e=(65535&t)+(65535&n);return(t>>16)+(n>>16)+(e>>16)<<16|65535&e}function o(t){for(var n=Array(),e=(1<<r)-1,o=0;o<t.length*r;o+=r)n[o>>5]|=(t.charCodeAt(o/r)&e)<<o%32;return n}function a(t){for(var n=i?"0123456789ABCDEF":"0123456789abcdef",e="",o=0;o<4*t.length;o++)e+=n.charAt(t[o>>2]>>o%4*8+4&15)+n.charAt(t[o>>2]>>o%4*8&15);return e}return n(t)}function V(){var a=this;a.stringify=function(t){switch(typeof t){case"string":return'"'+t.replace(/(["\\])/g,"\\$1").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r")+'"';case"boolean":return t?"true":"false";case"array":return"["+t.map(a.stringify).join(",")+"]";case"object":if(null==t)return"null";if("[object Array]"===Object.prototype.toString.call(t)){for(var n=[],e=t.length,o=0;o<e;o++)n.push(a.stringify(t[o]));return"["+n.join(",")+"]"}var i=[];for(var r in t)i.push(a.stringify(r)+":"+a.stringify(t[r]));return"{"+i.join(",")+"}";case"number":case!1:return t}},a.parse=function(t){return eval("("+t+")")}}function W(){var i,r=document.createElement("iframe"),a=1;r.src="javascript:;",r.style.cssText="width:0px;height:0px;margin:0px;position:absolute;left:-9999px;top:-9999px;display:none",r.setAttribute("frameborder","0",0),r.setAttribute("scrolling","no"),r.onload=function(){try{if("about:blank"!==r.contentWindow.location.href)return void(r.src="about:blank")}catch(t){return void(r.src="about:blank")}a=1;var t={};try{t=JSON.parse(r.contentWindow.name)}catch(t){}var n=i;i=null,n&&n(t)},document.body.appendChild(r),this.sendCommand=function(t,n){var e=Math.random(),o=arguments.callee;a?(a=0,t.token=e,i=n,r.contentWindow.name=JSON.stringify(t),r.contentWindow.location.replace(s.nameBridge)):setTimeout(function(){o(t,n)},50)}}function K(){var r=document.createElement("iframe"),a=0;r.src=s.messageBridge,r.style.cssText="width:0px;height:0px;margin:0px;position:absolute;left:-9999px;top:-9999px;display:none",r.setAttribute("frameborder","0",0),r.setAttribute("scrolling","no"),r.onload=function(){a=1},document.body.appendChild(r),this.sendCommand=function(t,n){var e=Math.random(),o=arguments.callee;function i(t){t&&t.data&&t.data.token&&t.data.token===e&&(i=null,window.removeEventListener&&window.removeEventListener("message",i),window.detachEvent&&window.detachEvent("onmessage",i),a=1,n&&n(t.data))}a?(a=0,t.token=e,window.addEventListener?window.addEventListener("message",i):window.attachEvent("onmessage",i),r.contentWindow.postMessage(t,"*")):setTimeout(function(){o(t,n)},50)}}function F(t,n){F.storeBridge||(window.postMessage?F.storeBridge=new K:F.storeBridge=new W),F.storeBridge.sendCommand(t,n)}n=window[a]||[],"[object Array]"===Object.prototype.toString.call(n)&&(window[a]={monitor:{},push:function(){for(var n=window[a],t=0;t<arguments.length;t++){var e=arguments[t];if("_setMonitor"===e[0]&&e[1]){var o=e[1].toString();n.id=o,n.monitor[o]||(n.monitor[o]={id:o,info:{popStateMode:!0},localInfo:{},push:function(t){var n=p[t[0]];n&&n.apply(this,t.slice(1))}},A.apply(n.monitor[o]),function(t){setTimeout(function(){n.monitor[t].push(["_trackPageView",1])},0)}(o))}var i=n.monitor[n.id];i&&i.push(e)}}},window[a].push.apply(window[a],n),g())}();